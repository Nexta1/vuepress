# Curl

## Network

联网意味着在互联网上的两个端点之间进行通信。互联网只是一堆相互连接的机器（实际上是计算机），每个机器都使用自己的单独地址（称为IP地址）。每台机器的地址可以是不同类型的，机器甚至可以有临时地址。这些计算机也称为主机。

1. 客户端和服务器
   你坐在前面的电脑、平板电脑或手机通常被称为“客户端”，而你想与之交换数据的机器被称为”服务器“。客户端和服务器之间的主要区别在于它们所扮演的角色。没有什么可以阻止角色在后续操作中反转。
   传输主动权始终由客户端承担，因为服务器无法联系客户端，但客户端可以联系服务器。
2. 服务器
   当我们作为客户想要启动从其中一台机器（服务器）的传输时，我们通常不知道它的IP地址，但通常知道它的名称。当我们使用curl或浏览器等工具时，要与之通信的机器的名称通常嵌入在我们使用的URL中。
   我们可以使用如下URLhttp://example.com/index.html，这意味着客户端将连接到名为example.com的主机并与之通信。
3. 主机名解析
   一旦客户端知道主机名，它就需要弄清楚具有该名称的主机具有哪些IP地址，以便与它联系。
   将名称转换为IP地址称为“名称解析”。名称被“解析”为一个或一组地址。这通常是由“DNS服务器”完成的，DNS就像一个大的查找表，可以将名称转换为地址——实际上，互联网上的所有名称。计算机通常已经知道运行DNS服务器的计算机的地址，因为这是设置网络的一部分。
   因此，网络客户端会询问DNS服务器，“你好，请给我所有的地址，例如.com”，服务器会给出一个地址列表。或者在拼写错误的情况下，它可以回答该名称不存在。
4. 建立连接
   对于客户端想要联系的主机的一个或多个IP地址，它会发送一个“连接请求”。它想要建立的连接被称为TCP（传输控制协议）或QUIC连接，这就像在两台计算机之间连接一个不可见的字符串。一旦建立，该字符串就可以用于在两个方向上发送数据流。
   如果客户端接收到主机的多个地址，它将在连接时遍历该地址列表，如果一个地址失败，它将尝试连接到下一个地址，重复直到其中一个地址有效或全部失败。
5. 接到端口号
   当使用TCP或QUIC连接到远程服务器时，客户端会选择在哪个端口号上进行连接。端口号只是特定服务的专用位置，允许同一服务器同时侦听其他端口号上的其他服务。
   大多数常见的协议都有客户端和服务器使用的默认端口号。例如，当使用http:
   //example.com/index.htmlURL，该URL指定了一个名为HTTP的方案，该方案告诉客户端默认情况下应该在服务器上尝试TCP端口号80。如果URL使用HTTPS，则默认端口号为443。
   URL可以包括自定义端口号。如果未指定端口号，则客户端将使用URL中使用的方案的默认端口。
6. 安全
   建立TCP连接后，许多传输都需要双方协商一个更好的安全级别才能继续（例如，如果使用HTTPS），这是通过TLS（传输层安全）完成的。如果是这样，客户端和服务器将首先进行TLS握手，并且只有在握手成功的情况下才会继续。
   如果使用QUIC完成连接，TLS握手将在连接阶段自动完成。
7. 传输数据
   当连接的隐喻“字符串”连接到远程计算机时，两台机器之间就建立了连接。然后可以使用此连接来交换数据。这种交换是使用“协议”完成的，如下一章所述。
   传统上，我们所说的下载是指数据从服务器传输到客户端；相反，上传是指将数据从客户端传输到服务器。客户是“在这里”；服务器在“上面”。
8. 断开
   当单个传输完成时